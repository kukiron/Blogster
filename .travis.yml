sudo: false
language: node_js
dist: trusty
notifications:
  email: false
node_js:
- '8'
- '9'
services:
- mongodb
- redis-server
env:
  matrix:
  - NODE_ENV=ci PORT=3000
  global:
  - secure: ImelUWxSm0kXC00W0z1dehxcs1nNsH5rZh5VawP/s0KaZteAULk5wkEwGj8qnSusId4vIE9mHV5Xs9yeThkhGbfNkhs6GJOTVqxE0bX1xZsf0iXx/0jrN4SzPArNIuZ9UeCmMa3yuQOwmK96/z4oDQWmbnaejI4o5ENUEDebE1pdG8FtrxpPRAjzesLVkx75k2novaDH1wdIHIH86ktNQ53VGUXI6Dn+DtqBUD77t/ldgMwy2PQY1ZeangV0VnxM7ozc6D2QyuTOjgM2Yk9jpYLo1zu47a1/iFd5pc2cOv09PcDRzAth4Vgqe/BExxkvPcLGrH/DfjY2GVTK0ISqKr4WL2E9H/HHq+gKEzmXhkrenO0xbOCvadVMp6CcV0YMHE6qljV4Hu8WCc94ARkkx+Lj9nk4cRQIwbTlWEvn+mSGFPOIXrU8kJme4yjA1ddKC6QnUTI2OkJHa8P4aNc0yb1PoSI7MNF1fEZmqVLiO5HnaUUDWCE1uvGQAmrrOQWUB28e/MND/CxOrQ8kynyO9QNunryFbj33nZft63cTYHs0uIwR+M/bdd94ecAX9aQG/dJ7mLd1yrM/7hNZodzabTlGA9Z9txhnBsq3CWnAWNnTqUeKGoBm3OAXUiqg3oUuyk+umbsbc2tysdwv0wAV3UOArOHnrtNV0PHGJAjAKHQ=
  - secure: Bgs0xlnLMmDFL8APIeLkQRppY8Qaz+F2z/+iLrwni9MFribZ5RBGspi7BQ8iK6Yw1zWhiFuOfNA00i7qYw/JxWqA+EEhxhKkZkiuDrIczLjbfWAZQw6LP2loiXVYbL8JdCYZhK3YL8m+DUELF+b17sAJ8i/V8fESpuX3WrwXayfQ/3mGYfj+T/IbkJXgamZm/GkDMAxGt6Y7eumbq12NoBgbydDisaY6Q2gz3xXmwwMs347sAkClchnmUYag2bibYM98iStoHClqc9HTvl1BilaACPPqaIo/osIvyNf5FUTuZREb/ALTSTbHQWCWpYyi+ExBWpHql1bQSd0yQLUbf9tzwlAde/FWF++6jFT1BAvitBrW2VSy141LRnteCa6nzWLa7321nCmuPosYKzKIONdb9ue2sNmNY8GW1vBKPD4r/zh1ClnvqRRWNIQxNNvS+OXmI7hI2VzIkpbjG1VR6E5u3iAMcKqcu4QFakyHYINLJco1+emid0JciiMXwGWJhgzSIejyy/TcIQiGGjU29vSUrBR0RLVGVK9gUGteuozc6fz+2nfBagiE0QZTP1HvQCh4qdlLbt811k+EhS3YRjSa6B1zVpVyoNNGjjW3PmtCmdF1PMPAb6mFs91qWkCUHwfS8bpl+tcQdY95jWi6vSH3lQahD+BzRx8R8aB/q0c=
  - secure: URa5jazuF8sLIfNF8YyUKhfGVA4K3aBcPLKdQe9dDWzirKn5onmPC7JS13Y3QMykhcOK46kjqB58sArD9ym7PtJJLKdLkrnrbOa8yBgG6vXTp2JPcvt0BbplyYLmCaEagI3M5UALkQxcb0GiYajnGzcCg5P6rFYcrwvGrtZ004Vbm9pF+r+H34bbMgUOHA5v2AqBwvAYGdtWECrJu84oMeCPkSZpo29Q+k3jH0/r4AT7VsxiijrGkuS2e0qgMVHa35Yk6IASjeWydWeJcPz8tWdYhGkpNWUX0oehVLQSRBQZJD1jUmVCPemqbJXl6BuNafOs06L17p/1VLuUhuEjKdtVYANtOhSgElogHDoVh1VhRUZ4U6O9KxpvhGUSGDTx85DKf6fMThfUaalAw1psqR827iaJbNiqc+io6u5U+/Me8TVzrAPdyzO9j0p4Q76+4d9R/cyw5MqdbgtiXVqVPCLCdxvrdsK3259cjbxAfqhTKp+TCCSKXFL0VGD8lEViFjOsYuZl8igg6jHMIwWDwO150VsWVGo6HMLdiSTS8u7BNJthiZu+QuwdPpVABS6GH5hI7RKtCDR3aVjObDv+vfB/gfv91xj1lr5b++MAi14g6DEoMWxtvjpUbRWpQG/R/CxlUDon/68qzTUdW+8D4Uh/GhKAnJyGggwo8m7qml8=
  - secure: hD2x+TMwrZMBqAkev4MxvsHtUe6zRqVHKUDNaOP0KBI0S3KZlRyS+nn8dKx7H8vmTeAzEeUXGX+R0AMxYRIH6VybKuCymrVaITD1F85Vaqc2WNAFbIQV0CKojMtDjlfG6Oz2ZbBZTR4UWPGf71LE4bMat+e6swwd0NNWY5dVuiF00bqPp+zLnDUrSn5HIGAPrwwov2qVlF0JWe3lgUPHN0HjmXedo9Gr77ZJQ0IF/hagoG+UJlt+Lbd48MOlbUSqSdB7jEyEOb4oFzSdMr+NcgGokrxEKM4fGxcAhLSHMJAYojxe7bZAf4bmAsu6E66tXUD+CxHE1VVuKg+Bbfra9FV0yyumF2ASgt5ByIa9+CQAQ/FHgPRdUz8XUTU3HE2Bevamijka1FX25CTYPfsLIN0UYrDdtVHaNMjY84NkvlHA8cs7i2erqsaBmUTyRQPR6CigkV9UCaJFxmtz73bRPyueImtDVyLWOl6w8dGkeSYFtmyUR5i9r+7ck2LsWVpqmUxV3ZKdmN6/1CCBRjO2awxPZus5eNPgnsvf1FdPbhL87zdYUB6I7mZ5tW/OU6ZBxqKiwqMnD+ZXqjGU90n8f66EMtipPFnZvu9S1NdlVUSQnwPFM8+6lmV5yD5gEnzwVbC0L87L0myKIOHkfW3ZSHZG5yCPfGceYCnmxTQqrMQ=
  - secure: hQieeIRZt+jE97OELN3uDrIpfrDJopNEG9iTNGcinbzh78/04FgXEtTAvivyC1nkNLIanNaxAuDrtb42GKncfMSQOmMSKQojo39gYk9uVjruR/YKNbh92vojZ/7ByEYbRO0FZcNTQ3YGZPik+2E2/J+InYIEbMBjC28yaNBME4CM37HNpdALtzRR9YSTTNhUjDTRKP8TtdnzXC+bDyvTnSKsiEDWsSDQT+zkIx1Q5j4BkjSzdPK6VJ9492Xg84Hx6lyJ3apsKaaRWnQhh6BkBRyRIiw5C1CGuJ2lCl/zbuNaECeadHsS00uUe9W/+744LcgzUd8qzOT44uscvXetaFPbALriQyt6M6LYWzD6nbMqZDAHjmy6S/JU8W6L3uiyXqVVLeXHyIt6eeit90uiPrjaSAmMdIFoQ5CjDaPjnjmYV7XrI/4FyIkY1V3EQ9RqQLNd+/lfzFO9HdX3SnkkNQoRsV51pat6rPpfs3CizBgycQZZXDdEpCltHii8UR8e+y0Zv/0pj8qnbjhjLRsIkMcAk4EeYw8e5/hcsF5d9LPgqrjdAm7g1yl7bdEf/SxhFp8nskv1Eqw6j2lbpjVCIUYmrCYRMa+JqmCZdXqOTOcOu9NKedDozDPW3vEa5O+/RzqoyBrwrvqr9FMSsI5foXD563B/+9hQ29iQJAKT7no=
  - secure: o5b5F90wd08o9CT0NAygC+4inuoZHrr5YyNhZsVy7sTdhtu2MNntN5OU/etKNdYej/SZ3snOooN5+FlNa7MSCNDL7iAC0V4R6vf7RcFPZXzDNCTQK5o9//Osa8m/p8CroOIIcC9+57fnHBF5xmDI7Kn6WhuXo2ay6tPFtzP8Ncz0oQMZSLyvIDCxCFzKkTDkdpoN7lq1g4ddb5k1c4OM/8eOo8sIyat1pGRvF3D7VrgvbKuEvKkjNPnX31pRwV8Q8BT86FpW+9NjCbRlrGjtUZxg7y+T6RTPgSrNB0vLrgyqcSJMATv9dZFL07gCcy/wVsr45iSLkqiQXPA31xUs7Zt/kT4QId6j5s+0Jr90hOO8Fr0/J3MTakAvESWP7R2vGiGGMKazKjq+CDDCp1VxSEN0ICaI3Ca0lWcRyStP6UDeZa6JQ0g6OiH4qdzQLqUKOLzyCB+N0UFPE+DiHk5hPjdtTu5HB5bj1trOtv6W1RzBhkM7Ys6HC/QWWc5dgwcBBtpZZZ5N0XaAZ32jtc2VBGZB0zd6cF76ThFjg3ao+x6Gl8GfZO7KF8M8HkiD0NWbIDBXOrQ0JjuKR3dLSvCPuw/ZT4UwFsFlPbAYs2xOlh0/VQ7jvDIjMQg4M+OYvqCoJHSAZqPhUnSlvvSHRp1WRaQdcNaI4FANSjE5+swXfxI=
cache:
  directories:
  - node_modules
  - client/node_modules
before_install:
- npm install -g npm@latest
install:
- npm install
- npm run build
script:
- nohup npm start &
- sleep 3
- npm run test
